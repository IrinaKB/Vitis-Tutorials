


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../_static/js/jquery.min.js"></script>	
	  <script type="text/javascript" src="../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../_static/js/common-ui-all.min.js"></script>		
    <script type="text/javascript" src="../_static/js/header-footer.min.js"></script>	
    <script type="text/javascript" src="../_static/js/jquery-ui.min.js"></script>	
    <script type="text/javascript" src="../_static/js/CoveoJsSearch.Lazy.min.js"></script>	
    <script type="text/javascript" src="../_static/js/linkid.js"></script>		
    <script type="text/javascript" src="../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://www.xilinx.com/etc.clientlibs/site/clientlibs/xilinx/all/resources/imgs/header/xilinx-header-logo.svg" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search" 
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a> 
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a> 
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a> 
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a> 
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a> 
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search" 
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../README.html" class="icon icon-home" alt="Documentation Home"> Vitis™ Application Acceleration Development Flow Tutorials
          

          
          </a>

          
            
            
              <div class="version">
                2020.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started Pathway</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../vitis-getting-started/README.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vitis-execution-model/README.html">Execution Model of an FPGA Accelerated Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../alveo-getting-started/README.html">Getting Started with the Alveo Portfolio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Pathway3/README.html">Essential Concepts for Building and Running the Accelerated Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="README.html">My First Program</a></li>
<li class="toctree-l1"><a class="reference internal" href="../convolution-tutorial/README.html">Optimizing Accelerated FPGA Applications: Convolution Example</a></li>
</ul>
<p class="caption"><span class="caption-text">Intermediate</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started-rtl-kernels/README.html">Getting Started with RTL Kernels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vitis_hls_analysis/README.html">Vitis HLS Analysis and Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mixing-c-rtl-kernels/README.html">Mixing C++ and RTL Kernels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using-multiple-cu/README.html">Using Multiple Compute Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="../host-code-opt/README.html">Host Code Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mult-ddr-banks/README.html">Using Multiple DDR Banks</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../controlling-vivado-impl/README.html">Controlling Vivado Implementation</a></li>
</ul>
<p class="caption"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-1/docs/README.html">Master</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Xilinx/Vitis-Tutorials/blob/master/README.md">2019.2</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../_sources/my-first-program/building_application.md.txt"
						rel="nofollow">Show Source</a></li>						
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../README.html">Vitis™ Application Acceleration Development Flow Tutorials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../README.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>3. Compiling, Linking, and Running the Application</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/my-first-program/building_application.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <table class="sphinxhide">
 <tr>
   <td align="center"><img src="https://www.xilinx.com/content/dam/xilinx/imgs/press/media-kits/corporate/xilinx-logo.png" width="30%"/><h1>2020.1 Vitis™ Application Acceleration Development Flow Tutorials</h1>
   <a href="https://github.com/Xilinx/Vitis-Tutorials/branches/all">See 2019.2 Vitis Application Acceleration Development Flow Tutorials</a>
   </td>
 </tr>
 <tr>
 <td>
 </td>
 </tr>
</table><div class="section" id="compiling-linking-and-running-the-application">
<h1>3. Compiling, Linking, and Running the Application<a class="headerlink" href="#compiling-linking-and-running-the-application" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>A Vitis core development kit application is a heterogeneous application with two distinct components: the software program and the FPGA binary. These two components are built using dedicated compilation chains. This lab describes how to compile, link, and run the VADD example from the command line.</p>
</div>
<div class="section" id="building-the-application">
<h2>Building the Application<a class="headerlink" href="#building-the-application" title="Permalink to this headline">¶</a></h2>
<div class="section" id="building-the-host-program">
<h3>Building the Host Program<a class="headerlink" href="#building-the-host-program" title="Permalink to this headline">¶</a></h3>
<p>The host application, written in C/C++ using OpenCL™ API calls and can be built using the standard GCC compiler. Each source file is compiled to an object file (O) and linked with the Xilinx Runtime (XRT) shared library to create the executable (EXE). For details on GCC and its associated command line options, refer to <a class="reference external" href="https://gcc.gnu.org/onlinedocs/gcc/">Using the GNU Compiler Collection (GCC)</a>.</p>
<p>To build the host code, use the following XCPP command for the <code class="docutils literal notranslate"><span class="pre">./reference-files/src</span></code> files.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>g++ -I<span class="nv">$XILINX_XRT</span>/include/ -I<span class="nv">$XILINX_VIVADO</span>/include/ -Wall -O0 -g -std<span class="o">=</span>c++11 ./src/host.cpp  -o <span class="s1">&#39;host&#39;</span>  -L<span class="nv">$XILINX_XRT</span>/lib/ -lOpenCL -lpthread -lrt -lstdc++
</pre></div>
</div>
<p>This command specifies the required libraries and include files for XRT, the Vivado tools, and the OpenCL API. For more information on building the host, refer to the <a class="reference internal" href="../Pathway3/BuildingAnApplication.html"><span class="doc">Building an Application</span></a> lab in the  Essential Concepts for Building and Running the Accelerated Application tutorial.</p>
<blockquote>
<div><p><strong>TIP</strong>: To run the commands shown here, you must set up the environment for the Vitis core development kit as discussed in <em>Building an Application</em>.</p>
</div></blockquote>
</div>
<div class="section" id="building-the-fpga-binary">
<h3>Building the FPGA Binary<a class="headerlink" href="#building-the-fpga-binary" title="Permalink to this headline">¶</a></h3>
<p>Similar to building the software application, building the hardware requires compiling and linking steps using the Vitis compiler as explained in the <a class="reference internal" href="../Pathway3/BuildingAnApplication.html"><span class="doc">Building an Application</span></a> lab in the Essential Concepts for Building and Running the Accelerated Application tutorial.</p>
<p>In the following command, the build target is for software emulation. You can also specify other build targets, such as <code class="docutils literal notranslate"><span class="pre">hw_emu</span></code> and <code class="docutils literal notranslate"><span class="pre">hw</span></code> as explained in the <a class="reference external" href="/docs/Pathway3/BuildingAnApplication">Building an Application</a> lab in the Essential Concepts for Building and Running the Accelerated Application tutorial.</p>
<ul>
<li><p>Use the following commands for compiling the hardware kernel for the VADD example.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">v</span><span class="o">++</span> <span class="o">-</span><span class="n">t</span> <span class="n">sw_emu</span> <span class="o">--</span><span class="n">config</span> <span class="n">design</span><span class="o">.</span><span class="n">cfg</span> <span class="o">-</span><span class="n">c</span> <span class="o">-</span><span class="n">k</span> <span class="n">vadd</span> <span class="o">-</span><span class="n">I</span><span class="s1">&#39;../src&#39;</span> <span class="o">-</span><span class="n">o</span> <span class="s1">&#39;vadd.xilinx_u200_xdma_201830_2.xo&#39;</span> <span class="s1">&#39;./src/vadd.cpp&#39;</span>
</pre></div>
</div>
</li>
<li><p>Use the following commands for linking the hardware kernel for the VADD example.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">v</span><span class="o">++</span> <span class="o">-</span><span class="n">t</span> <span class="n">sw_emu</span> <span class="o">--</span><span class="n">config</span> <span class="n">design</span><span class="o">.</span><span class="n">cfg</span> <span class="o">-</span><span class="n">l</span> <span class="o">-</span><span class="n">o</span><span class="s1">&#39;vadd.xilinx_u200_xdma_201830_2.xclbin&#39;</span> <span class="n">vadd</span><span class="o">.</span><span class="n">xilinx_u200_xdma_201830_2</span><span class="o">.</span><span class="n">xo</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="run-emulation">
<h2>Run Emulation<a class="headerlink" href="#run-emulation" title="Permalink to this headline">¶</a></h2>
<p>Before running the design on hardware, run the design in <a class="reference internal" href="../Pathway3/Emulation.html"><span class="doc">Running Software and Hardware Emulation</span></a> mode to verify functionality. Running the application in any emulation mode is a two-step process:</p>
<ol class="simple">
<li><p>Generate an emulation configuration file.</p></li>
<li><p>Run the application.</p></li>
</ol>
<div class="section" id="software-emulation">
<h3>Software Emulation<a class="headerlink" href="#software-emulation" title="Permalink to this headline">¶</a></h3>
<ol>
<li><p>To run in software emulation mode, generate an emulation configuration file, and set the XCL_EMULATION_MODE environment variable.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>emconfigutil --platform xilinx_u200_xdma_201830_2
<span class="nb">export</span> <span class="nv">XCL_EMULATION_MODE</span><span class="o">=</span>sw_emu  
</pre></div>
</div>
</li>
<li><p>With the configuration file <code class="docutils literal notranslate"><span class="pre">emconfig.json</span></code> generated and XCL_EMULATION_MODE set, use the following command to execute the host program and kernel in software emulation mode.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./host vadd.xilinx_u200_xdma_201830_2.xclbin
</pre></div>
</div>
</li>
<li><p>Confirm the emulation run.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Found</span> <span class="n">Platform</span>
<span class="n">Platform</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Xilinx</span>
<span class="n">INFO</span><span class="p">:</span> <span class="n">Reading</span> <span class="n">vadd</span><span class="o">.</span><span class="n">xilinx_u200_xdma_201830_2</span><span class="o">.</span><span class="n">xclbin</span>
<span class="n">Loading</span><span class="p">:</span> <span class="s1">&#39;vadd.xilinx_u200_xdma_201830_2.xclbin&#39;</span>
<span class="n">TEST</span> <span class="n">PASSED</span>
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div><p><strong>IMPORTANT</strong>: For RTL kernels, software emulation can be supported if a C-model is associated with the kernel. When a C-model is not available, hardware emulation must be used to debug the kernel code.</p>
</div></blockquote>
</div>
<div class="section" id="hardware-emulation">
<h3>Hardware Emulation<a class="headerlink" href="#hardware-emulation" title="Permalink to this headline">¶</a></h3>
<ol>
<li><p>For hardware emulation, rebuild the kernels using the <code class="docutils literal notranslate"><span class="pre">-t</span> <span class="pre">hw_emu</span></code> option.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>v++ -t hw_emu --config design.cfg -c -k vadd -I<span class="s1">&#39;../src&#39;</span> -o <span class="s1">&#39;vadd.xilinx_u200_xdma_201830_2.xo&#39;</span> <span class="s1">&#39;./src/vadd.cpp&#39;</span>
v++ -t hw_emu --config design.cfg -l -o <span class="s1">&#39;vadd.xilinx_u200_xdma_201830_2.xclbin&#39;</span> vadd.xilinx_u200_xdma_201830_2.xo
</pre></div>
</div>
</li>
<li><p>To run in hardware emulation mode, generate an emulation configuration file, and set the XCL_EMULATION_MODE environment variable.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>emconfigutil --platform xilinx_u200_xdma_201830_2
<span class="nb">export</span> <span class="nv">XCL_EMULATION_MODE</span><span class="o">=</span>hw_emu
</pre></div>
</div>
</li>
<li><p>Use the following command to execute the host program and kernel in hardware emulation mode.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">host</span> <span class="n">vadd</span><span class="o">.</span><span class="n">xilinx_u200_xdma_201830_2</span><span class="o">.</span><span class="n">xclbin</span>
</pre></div>
</div>
</li>
<li><p>Confirm the emulation run.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Found</span> <span class="n">Platform</span>
<span class="n">Platform</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Xilinx</span>
<span class="n">INFO</span><span class="p">:</span> <span class="n">Reading</span> <span class="n">vadd</span><span class="o">.</span><span class="n">xilinx_u200_xdma_201830_2</span><span class="o">.</span><span class="n">xclbin</span>
<span class="n">Loading</span><span class="p">:</span> <span class="s1">&#39;vadd.xilinx_u200_xdma_201830_2.xclbin&#39;</span>
<span class="n">INFO</span><span class="p">:</span> <span class="p">[</span><span class="n">HW</span><span class="o">-</span><span class="n">EM</span> <span class="mi">01</span><span class="p">]</span> <span class="n">Hardware</span> <span class="n">emulation</span> <span class="n">runs</span> <span class="n">simulation</span> <span class="n">underneath</span><span class="o">.</span> <span class="n">Using</span> <span class="n">a</span> <span class="n">large</span> <span class="n">data</span> <span class="nb">set</span> <span class="n">will</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">long</span> <span class="n">simulation</span> <span class="n">times</span><span class="o">.</span> <span class="n">It</span> <span class="ow">is</span> <span class="n">recommended</span> <span class="n">that</span> <span class="n">a</span> <span class="n">small</span> <span class="n">dataset</span> <span class="ow">is</span> <span class="n">used</span> <span class="k">for</span> <span class="n">faster</span> <span class="n">execution</span><span class="o">.</span> <span class="n">The</span> <span class="n">flow</span> <span class="n">uses</span> <span class="n">approximate</span> <span class="n">models</span> <span class="k">for</span> <span class="n">DDR</span> <span class="n">memory</span> <span class="ow">and</span> <span class="n">interconnect</span> <span class="ow">and</span> <span class="n">hence</span> <span class="n">the</span> <span class="n">performance</span> <span class="n">data</span> <span class="n">generated</span> <span class="ow">is</span> <span class="n">approximate</span><span class="o">.</span>
<span class="n">TEST</span> <span class="n">PASSED</span>
<span class="n">INFO</span><span class="p">:</span> <span class="p">[</span><span class="n">Vitis</span><span class="o">-</span><span class="n">EM</span> <span class="mi">22</span><span class="p">]</span> <span class="p">[</span><span class="n">Wall</span> <span class="n">clock</span> <span class="n">time</span><span class="p">:</span> <span class="mi">16</span><span class="p">:</span><span class="mi">39</span><span class="p">,</span> <span class="n">Emulation</span> <span class="n">time</span><span class="p">:</span> <span class="mf">0.108767</span> <span class="n">ms</span><span class="p">]</span> <span class="n">Data</span> <span class="n">transfer</span> <span class="n">between</span> <span class="n">kernel</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="ow">and</span> <span class="k">global</span> <span class="n">memory</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">vadd_1</span><span class="p">:</span><span class="n">m_axi_gmem</span><span class="o">-</span><span class="n">DDR</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>          <span class="n">RD</span> <span class="o">=</span> <span class="mf">32.000</span> <span class="n">KB</span>              <span class="n">WR</span> <span class="o">=</span> <span class="mf">16.000</span> <span class="n">KB</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="running-on-hardware">
<h2>Running on Hardware<a class="headerlink" href="#running-on-hardware" title="Permalink to this headline">¶</a></h2>
<p>After the functional correctness and host-kernel integration has been verified using the emulation modes, now target (<code class="docutils literal notranslate"><span class="pre">-t</span> <span class="pre">hw</span></code>) the Alveo Data Center accelerator card on the Xilinx FPGA.</p>
<div class="section" id="hardware-execution">
<h3>Hardware Execution<a class="headerlink" href="#hardware-execution" title="Permalink to this headline">¶</a></h3>
<ol>
<li><p>For hardware, rebuild the kernels using the <code class="docutils literal notranslate"><span class="pre">-t</span> <span class="pre">hw</span></code> option.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>v++ -t hw --config design.cfg -c -k vadd -I<span class="s1">&#39;../src&#39;</span> -o<span class="s1">&#39;vadd.xilinx_u200_xdma_201830_2.xo&#39;</span> <span class="s1">&#39;./src/vadd.cpp&#39;</span>
v++ -t hw --config design.cfg -l -o <span class="s1">&#39;vadd.xilinx_u200_xdma_201830_2.xclbin&#39;</span> vadd.xilinx_u200_xdma_201830_2.xo
</pre></div>
</div>
</li>
<li><p>Make sure the XCL_EMULATION_MODE environment variable is not set.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unset</span> <span class="n">XCL_EMULATION_MODE</span>
</pre></div>
</div>
<p>The hardware build can take a while because the design now needs to be synthesized in the Vivado tool and packaged into a bitstream that is loaded on the FPGA hardware.</p>
</li>
<li><p>Once the build is ready and the environment is correctly set, execute the design to run on the Alveo Data Center accelerator card.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">host</span> <span class="n">vadd</span><span class="o">.</span><span class="n">xilinx_u200_xdma_201830_2</span><span class="o">.</span><span class="n">xclbin</span>
</pre></div>
</div>
</li>
<li><p>Confirm the emulation run.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Found</span> <span class="n">Platform</span>
<span class="n">Platform</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Xilinx</span>
<span class="n">INFO</span><span class="p">:</span> <span class="n">Reading</span> <span class="n">vadd</span><span class="o">.</span><span class="n">xilinx_u200_xdma_201830_2</span><span class="o">.</span><span class="n">xclbin</span>
<span class="n">Loading</span><span class="p">:</span> <span class="s1">&#39;vadd.xilinx_u200_xdma_201830_2.xclbin&#39;</span>
<span class="n">TEST</span> <span class="n">PASSED</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="using-the-makefile">
<h2>Using the Makefile<a class="headerlink" href="#using-the-makefile" title="Permalink to this headline">¶</a></h2>
<p>The Makefile is a simple way to organize the commands and options and makes it easier to repeat the builds as needed. The <code class="docutils literal notranslate"><span class="pre">Makefile</span></code>, provided in <code class="docutils literal notranslate"><span class="pre">./reference-files</span></code>, addresses the commands defined above, with additional structure to help you clean up builds, and rebuild the project.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> provided requires you to specify the build TARGET, the hardware DEVICE, and the version (VER) of the host code you are using.</p>
<ul>
<li><p>To target software emulation, use the following <code class="docutils literal notranslate"><span class="pre">make</span></code> command in the <code class="docutils literal notranslate"><span class="pre">reference_files</span></code> directory.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">make</span> <span class="n">check</span> <span class="n">TARGET</span><span class="o">=</span><span class="n">sw_emu</span> <span class="n">DEVICE</span><span class="o">=</span><span class="n">xilinx_u200_xdma_201830_2</span> <span class="n">VER</span><span class="o">=</span><span class="n">host_cpp</span>
</pre></div>
</div>
</li>
<li><p>To target hardware emulation, use the following <code class="docutils literal notranslate"><span class="pre">make</span></code> command in the <code class="docutils literal notranslate"><span class="pre">reference_files</span></code> directory.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">check</span> <span class="n">TARGET</span><span class="o">=</span><span class="n">hw_emu</span> <span class="n">DEVICE</span><span class="o">=</span><span class="n">xilinx_u200_xdma_201830_2</span> <span class="n">VER</span><span class="o">=</span><span class="n">host_cpp</span>
</pre></div>
</div>
</li>
<li><p>To target hardware, use the following <code class="docutils literal notranslate"><span class="pre">make</span></code> command in the <code class="docutils literal notranslate"><span class="pre">reference_files</span></code> directory.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">check</span> <span class="n">TARGET</span><span class="o">=</span><span class="n">hw</span> <span class="n">DEVICE</span><span class="o">=</span><span class="n">xilinx_u200_xdma_201830_2</span> <span class="n">VER</span><span class="o">=</span><span class="n">host_cpp</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="next-step">
<h2>Next Step<a class="headerlink" href="#next-step" title="Permalink to this headline">¶</a></h2>
<p>The next step in this tutorial is to <a class="reference external" href="./my-first-program/profile_debug">profile the application</a>.
</br></p>
<hr/>
<p align="center" class="sphinxhide"><b><a href="/docs/vitis-getting-started/README.md">Return to Getting Started Pathway</a> — <a href="docs/my-first-program/README.md">Return to Start of Tutorial</a></b></p><p align="center" class="sphinxhide"><sup>Copyright&copy; 2020 Xilinx</sup></p></div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>
	  
	  
	  <!-- Sphinx Page Footer block -->
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on July 23, 2020.
      </span>

    </p>
  </div>	  
      </div>
    </section>


  




  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>     	    
	    
	    
  
  
    
  
  

  
  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2020, Xilinx
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}
			
			underscoreSetup();
		</script>
	</body>
</html>



<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../_static/js/jquery.min.js"></script>	
	  <script type="text/javascript" src="../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../_static/js/common-ui-all.min.js"></script>		
    <script type="text/javascript" src="../_static/js/header-footer.min.js"></script>	
    <script type="text/javascript" src="../_static/js/jquery-ui.min.js"></script>	
    <script type="text/javascript" src="../_static/js/CoveoJsSearch.Lazy.min.js"></script>	
    <script type="text/javascript" src="../_static/js/linkid.js"></script>		
    <script type="text/javascript" src="../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://www.xilinx.com/etc.clientlibs/site/clientlibs/xilinx/all/resources/imgs/header/xilinx-header-logo.svg" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search" 
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a> 
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a> 
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a> 
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a> 
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a> 
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search" 
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../README.html" class="icon icon-home" alt="Documentation Home"> Vitis™ Application Acceleration Development Flow Tutorials
          

          
          </a>

          
            
            
              <div class="version">
                2020.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started Pathway</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../vitis-getting-started/README.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vitis-execution-model/README.html">Execution Model of an FPGA Accelerated Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../alveo-getting-started/README.html">Getting Started with the Alveo Portfolio</a></li>
<li class="toctree-l1"><a class="reference internal" href="README.html">Essential Concepts for Building and Running the Accelerated Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../my-first-program/README.html">My First Program</a></li>
<li class="toctree-l1"><a class="reference internal" href="../convolution-tutorial/README.html">Optimizing Accelerated FPGA Applications: Convolution Example</a></li>
</ul>
<p class="caption"><span class="caption-text">Intermediate</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started-rtl-kernels/README.html">Getting Started with RTL Kernels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vitis_hls_analysis/README.html">Vitis HLS Analysis and Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mixing-c-rtl-kernels/README.html">Mixing C++ and RTL Kernels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using-multiple-cu/README.html">Using Multiple Compute Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="../host-code-opt/README.html">Host Code Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mult-ddr-banks/README.html">Using Multiple DDR Banks</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../controlling-vivado-impl/README.html">Controlling Vivado Implementation</a></li>
</ul>
<p class="caption"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-1/docs/README.html">Master</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Xilinx/Vitis-Tutorials/blob/master/README.md">2019.2</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../_sources/Pathway3/BuildingAnApplication.md.txt"
						rel="nofollow">Show Source</a></li>						
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../README.html">Vitis™ Application Acceleration Development Flow Tutorials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../README.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>1. Building an Application</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Pathway3/BuildingAnApplication.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <table class="sphinxhide">
 <tr>
   <td align="center"><img src="https://www.xilinx.com/content/dam/xilinx/imgs/press/media-kits/corporate/xilinx-logo.png" width="30%"/><h1>2020.1 Vitis™ Application Acceleration Development Flow Tutorials</h1>
   <a href="https://github.com/Xilinx/Vitis-Tutorials/branches/all">See 2019.2 Vitis Application Acceleration Development Flow Tutorials</a>
   </td>
 </tr>
 <tr>
 <td align="center"><h1>Essential Concepts for Building and Running the Accelerated Application</h1>
 </td>
 </tr>
</table><div class="section" id="building-an-application">
<h1>1. Building an Application<a class="headerlink" href="#building-an-application" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>As described in the <a class="reference external" href="/docs/vitis-execution-model/">Execution Model of an FPGA Accelerated Application</a>, an accelerated application consists of a software program running on an x86 server, and the accelerated kernels running on an Alveo Data Center accelerator card or Xilinx device. The sources for both need to be built (compiled and linked) separately. For additional details, see <a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=2020.1%3Bt=vitis+doc%3Bd=vhc1571429852245.html">Introduction to the Vitis Environment for Acceleration</a> in the Application Acceleration Development flow of the Vitis Unified Software Platform Documentation (UG1416).</p>
<p>This tutorial describes how to build both the software and hardware portions of your design using the <code class="docutils literal notranslate"><span class="pre">g++</span></code> compiler and Vitis compiler (<code class="docutils literal notranslate"><span class="pre">v++</span></code>). It describes various command line options, including how to specify a target platform, and building for hardware or software emulation.</p>
<p>Reference files are provided in the <code class="docutils literal notranslate"><span class="pre">reference-files</span></code> directory for use with this tutorial.</p>
<blockquote>
<div><p><strong>IMPORTANT:</strong> Before running the example commands, ensure you have set up the Vitis core development kit by running the following commands, as described in <a class="reference external" href="https://www.xilinx.com/html_docs/xilinx2020_1/vitis_doc/vhc1571429852245.html">Setting up the Vitis Environment</a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span> <span class="c1">#setup Xilinx Vitis tools. XILINX_VITIS and XILINX_VIVADO will be set in this step.</span>
 <span class="nb">source</span> &lt;VITIS_install_path&gt;/settings64.sh
 <span class="c1">#Setup Xilinx runtime. XILINX_XRT will be set in this step.</span>
 <span class="nb">source</span> &lt;XRT_install_path&gt;/setup.sh
</pre></div>
</div>
</div></blockquote>
<p><strong>TIP:</strong> There is a Makefile provided in the <code class="docutils literal notranslate"><span class="pre">reference-files</span></code> that you can use to build the system (<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">build</span></code>) or elements of the build such as the host (<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">exe</span></code>) and the <code class="docutils literal notranslate"><span class="pre">xclbin</span></code> (<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">xclbin</span></code>). You can also use <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">clean</span></code> to clean the build data and start again.</p>
</div>
<div class="section" id="building-the-software">
<h2>Building the Software<a class="headerlink" href="#building-the-software" title="Permalink to this headline">¶</a></h2>
<p>The software program is written in C/C++ and uses OpenCL™ API calls to communicate and control the accelerated kernels. It is built using the standard GCC compiler or using the <code class="docutils literal notranslate"><span class="pre">g++</span></code> compiler, which is a wrapper around GCC. Each source file is compiled to an object file (<code class="docutils literal notranslate"><span class="pre">.o</span></code>) and linked with the Xilinx Runtime (XRT) shared library to create the executable. For details on GCC and associated command line options, refer to <a class="reference external" href="https://gcc.gnu.org/onlinedocs/gcc/">Using the GNU Compiler Collection (GCC)</a>.</p>
<ol>
<li><p><strong>Compiling the Software Program</strong></p>
<p>Change directory to the <code class="docutils literal notranslate"><span class="pre">./reference_files/run</span></code> folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">&lt;</span><span class="n">Vitis</span><span class="o">-</span><span class="n">Tutorials</span><span class="o">&gt;/</span><span class="n">docs</span><span class="o">/</span><span class="n">Pathway3</span><span class="o">/</span><span class="n">reference_files</span><span class="o">/</span><span class="n">run</span>
</pre></div>
</div>
<p>To compile the host application, use the <code class="docutils literal notranslate"><span class="pre">-c</span></code> option with a list of the host source files.</p>
<p>Optionally, the output object file name can be specified with the <code class="docutils literal notranslate"><span class="pre">-o</span></code> option as shown as follows.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>g++ ... -c &lt;source_file_name1&gt; ... &lt;source_file_nameN&gt; -o &lt;object_file_name&gt; -g
</pre></div>
</div>
</li>
<li><p><strong>Linking the Software Program</strong></p>
<p>To link the generated object files, use the <code class="docutils literal notranslate"><span class="pre">-l</span></code> option and object input files as follows.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>g++ ... -l &lt;object_file1.o&gt; ... &lt;object_fileN.o&gt; -o &lt;output_file_name&gt;
</pre></div>
</div>
<blockquote>
<div><p><strong>TIP:</strong> Host compilation and linking can be integrated into one step which does not require the <code class="docutils literal notranslate"><span class="pre">-c</span></code> and <code class="docutils literal notranslate"><span class="pre">-l</span></code> options. Only the source input files are required as shown in the following example.</p>
<p><code class="docutils literal notranslate"><span class="pre">g++</span> <span class="pre">...</span> <span class="pre">&lt;source_file_name1&gt;</span> <span class="pre">...</span> <span class="pre">&lt;source_file_nameN&gt;</span> <span class="pre">...</span> <span class="pre">-o</span> <span class="pre">&lt;output_file_name&gt;</span></code></p>
</div></blockquote>
</li>
<li><p><strong>Required Flags</strong></p>
<p>You will need to specify include paths and library paths for XRT and the Vivado tools:</p>
<ol class="simple">
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">-I</span></code> option to specify the include directories: <code class="docutils literal notranslate"><span class="pre">-I$XILINX_XRT/include</span> <span class="pre">-I$XILINX_VIVADO/include</span></code></p></li>
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">-L</span></code> option to specify directories searched for <code class="docutils literal notranslate"><span class="pre">-l</span></code> libraries: <code class="docutils literal notranslate"><span class="pre">-L$XILINX_XRT/lib</span></code></p></li>
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">-l</span></code> option to specify libraries used during linking: <code class="docutils literal notranslate"><span class="pre">-lOpenCL</span> <span class="pre">-lpthread</span> <span class="pre">-lrt</span> <span class="pre">-lstdc++</span></code></p></li>
</ol>
</li>
<li><p><strong>Complete Command</strong></p>
<p>The complete command to compile and link the host program in one step, from the <code class="docutils literal notranslate"><span class="pre">./reference_files/run</span></code> folder, will look like the following. Run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>g++ -I<span class="nv">$XILINX_XRT</span>/include/ -I<span class="nv">$XILINX_VIVADO</span>/include/ -Wall -O0 -g -std<span class="o">=</span>c++11 <span class="se">\</span>
../src/host.cpp  -o <span class="s1">&#39;host&#39;</span>  -L<span class="nv">$XILINX_XRT</span>/lib/ -lOpenCL -lpthread -lrt -lstdc++
</pre></div>
</div>
<blockquote>
<div><p><strong>Command Options and Descriptions</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-I../libs</span></code>, <code class="docutils literal notranslate"><span class="pre">-I$XILINX_XRT/include/</span></code>, and <code class="docutils literal notranslate"><span class="pre">-I$XILINX_VIVADO/include/</span></code>: Include directory</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wall</span></code>: Enable all warnings</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-O0</span></code>: Optimization option (execute the least optimization)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-g</span></code>: Generate debug info</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-std=c++11</span></code>: Language Standard (define the C++ standard, instead of the include directory)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">../src/host.cpp</span></code>: Source files</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-o</span> <span class="pre">'host'</span></code>: Output name</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-L$XILINX_XRT/lib/</span></code>: Look in XRT library</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-lOpenCL</span></code>, <code class="docutils literal notranslate"><span class="pre">-lpthread</span></code>, <code class="docutils literal notranslate"><span class="pre">-lrt</span></code>, and <code class="docutils literal notranslate"><span class="pre">-lstdc++</span></code>: Search the named library during linking</p></li>
</ul>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="building-the-hardware">
<h2>Building the Hardware<a class="headerlink" href="#building-the-hardware" title="Permalink to this headline">¶</a></h2>
<p>Next, you need to build the kernels that run on the hardware accelerator card. Similar to building the host application, building kernels also requires compiling and linking. The hardware kernels can be coded in C/C++, OpenCL C, or RTL. The C/C++ and OpenCL C kernels are compiled using the Vitis compiler, while RTL-coded kernels are compiled using the Xilinx <code class="docutils literal notranslate"><span class="pre">package_xo</span></code> utility.</p>
<p>For details on both <code class="docutils literal notranslate"><span class="pre">v++</span></code> and <code class="docutils literal notranslate"><span class="pre">package_xo</span></code>, refer to the <a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=2020.1%3Bt=vitis+doc%3Bd=yxl1556143111967.html">Vitis Environment Reference Materials</a> in the Application Acceleration Development flow of the Vitis Unified Software Platform Documentation (UG1416). Regardless of how each kernel is compiled, both methods generate a Xilinx object file (<code class="docutils literal notranslate"><span class="pre">.xo</span></code>) as an output.</p>
<p>The object files are subsequently linked with the shell (hardware platform) through the Vitis compiler to create the FPGA binary file, or <code class="docutils literal notranslate"><span class="pre">xclbin</span></code> file.</p>
<p>The following figure shows the compiling and linking flow for the various types of kernels.</p>
<p><img alt="compiling_and_linking_flow" src="../_images/compiling_and_linking_flow.png" /></p>
<p>This tutorial is limited to <code class="docutils literal notranslate"><span class="pre">v++</span></code> compilation and does not consider RTL kernels. For details on building RTL kernels, see the <a class="reference external" href="/docs/getting-started-rtl-kernels/README">Getting Started with RTL Kernels</a> tutorial.</p>
<div class="section" id="hardware-compilation">
<h3>Hardware Compilation<a class="headerlink" href="#hardware-compilation" title="Permalink to this headline">¶</a></h3>
<p>In hardware compilation, you are compiling hardware kernel source files through the <code class="docutils literal notranslate"><span class="pre">v++</span></code> command <code class="docutils literal notranslate"><span class="pre">-c</span></code> option. While <code class="docutils literal notranslate"><span class="pre">v++</span></code> command has command options, at minimum, you must specify the source files, the targeted platform, and the build target. For a complete list of <code class="docutils literal notranslate"><span class="pre">v++</span></code> command options, refer to the <a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=2020.1%3Bt=vitis+doc%3Bd=vitiscommandcompiler.html%3Ba=wrj1504034328013">Vitis Compiler Command</a> in the Application Acceleration Development flow of the Vitis Unified Software Platform Documentation (UG1416).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-k</span></code> or <code class="docutils literal notranslate"><span class="pre">--kernel</span></code> argument is used to specify the kernel name within the kernel source file to compile as follows.</p>
<p><code class="docutils literal notranslate"><span class="pre">v++</span> <span class="pre">…</span> <span class="pre">-k</span> <span class="pre">&lt;kernel_name&gt;</span>&#160; <span class="pre">&lt;kernel_source_file&gt;</span> <span class="pre">…</span> <span class="pre">&lt;kernel_source_file&gt;</span></code></p>
<p>The targeted platform must be specified during both compile and linking stages and is specified through the <code class="docutils literal notranslate"><span class="pre">--platform</span></code> option as follows.</p>
<p><code class="docutils literal notranslate"><span class="pre">v++</span> <span class="pre">…</span> <span class="pre">--platform</span> <span class="pre">&lt;platform_target&gt;</span></code></p>
<p>Finally, the build target is specified with the <code class="docutils literal notranslate"><span class="pre">-t</span></code> option.
<code class="docutils literal notranslate"><span class="pre">v++</span> <span class="pre">…</span> <span class="pre">-t</span> <span class="pre">&lt;build_target&gt;</span></code></p>
<p>There are three different build targets; two emulation targets used for debug and validation purposes, and one hardware target used to generate the actual binary needed to run on the FPGA.</p>
<p>These build target configurations options are: <code class="docutils literal notranslate"><span class="pre">sw_emu</span></code>, <code class="docutils literal notranslate"><span class="pre">hw_emu</span></code> and <code class="docutils literal notranslate"><span class="pre">hw</span></code>.</p>
<ul class="simple">
<li><p>In Software Emulation (<code class="docutils literal notranslate"><span class="pre">sw_emu</span></code>), both the host application code and the kernel code are compiled to run on the x86 processor. This allows iterative algorithm refinement through fast build-and-run loops. This target is useful for identifying syntax errors, performing source-level debugging of the kernel code running together with application, and verifying the behavior of the system.  For RTL kernels, software emulation can be supported if a C model is associated with the kernel. When a C model is not available, then hardware emulation must be used to debug the kernel code.</p></li>
<li><p>For Hardware Emulation (<code class="docutils literal notranslate"><span class="pre">hw_emu</span></code>) kernel code is compiled into a hardware model, which is run in a hardware simulator, while the rest of the system uses a C simulator. Building and running takes longer but provides a detailed, cycle-accurate view of kernel activity. This target is useful for testing the functionality of the logic that will run in the FPGA and for getting initial performance estimates.</p></li>
<li><p>Finally, when the target is set to Hardware (<code class="docutils literal notranslate"><span class="pre">hw</span></code>), the kernel code is synthesized and compiled to generate a binary to run on the FPGA.</p></li>
</ul>
<p>The Vitis compiler supports configuration files on the command line. This helps manage long command lines with individual switches, and helps to logically group related switches. In this lab, you will use a <code class="docutils literal notranslate"><span class="pre">design.cfg</span></code> file and put all needed options in that file. Open the <code class="docutils literal notranslate"><span class="pre">design.cfg</span></code> file and look at the content.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">platform</span><span class="o">=</span><span class="n">xilinx_u200_xdma_201830_2</span>
<span class="n">debug</span><span class="o">=</span><span class="mi">1</span>
<span class="n">save</span><span class="o">-</span><span class="n">temps</span><span class="o">=</span><span class="mi">1</span>

<span class="p">[</span><span class="n">connectivity</span><span class="p">]</span>
<span class="n">nk</span><span class="o">=</span><span class="n">mmult</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="n">mmult_1</span>
</pre></div>
</div>
<p>Use the following command to compile the kernel into a <em>software emulation</em> target, from the <code class="docutils literal notranslate"><span class="pre">/reference-files/run</span></code> folder:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>v++ -t sw_emu --config design.cfg -c -k mmult -I<span class="s1">&#39;../src&#39;</span> -o mmult.sw_emu.xilinx_u200_xdma_201830_2.xo ../src/mmult.cpp
</pre></div>
</div>
<blockquote>
<div><p><strong>Command and Config File Options and Descriptions</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-t</span> <span class="pre">sw_emu</span></code>: Target software emulation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--config</span> <span class="pre">design.cfg</span></code>: Specify a config file to use</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">platform=xilinx_u200_xdma_201830_2</span></code>: Target the xilinx_u250 platform</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">debug=1</span></code>: Generate debug info</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">save-temps=1</span></code>: Save temporary files generated during the build process</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nk=mmult:1:mmult_1</span></code>: Define the number of kernel instances (CUs) to instantiate</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-c</span></code>: Compile the kernel</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-k</span> <span class="pre">mmult</span></code>: Specify a kernel to compile</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">../src/mmult.cpp</span></code>: Specify source files</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-o</span> <span class="pre">mmult.sw_emu.xilinx_u200_xdma_201830_2.xo</span></code>: Specify the .xo output path and file name</p></li>
</ul>
</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">v++</span></code> command also generates the <code class="docutils literal notranslate"><span class="pre">compile_summary</span></code> file that can be viewed with Vitis analyzer to review relevant reports. You can open Vitis analyzer and review the compile summary using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vitis_analyzer</span> <span class="n">mmult</span><span class="o">.</span><span class="n">sw_emu</span><span class="o">.</span><span class="n">xilinx_u200_xdma_201830_2</span><span class="o">.</span><span class="n">xo</span><span class="o">.</span><span class="n">compile_summary</span>
</pre></div>
</div>
</div>
<div class="section" id="hardware-linking">
<h3>Hardware Linking<a class="headerlink" href="#hardware-linking" title="Permalink to this headline">¶</a></h3>
<p>During hardware linking, you will link one or more kernels with the platform to create an output binary container (<code class="docutils literal notranslate"><span class="pre">.xclbin</span></code>) file. The <code class="docutils literal notranslate"><span class="pre">v++</span></code> command <code class="docutils literal notranslate"><span class="pre">-l</span></code> option is used to link the hardware kernels. Similar to compiling, linking requires several options including specifying the .xo object files as input, the target platform, and the build target. For the available linking options, refer to <a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=2020.1%3Bt=vitis+doc%3Bd=vitiscommandcompiler.html%3Ba=wrj1504034328013">Vitis Compiler Command</a> in the Application Acceleration Development flow of the Vitis Unified Software Platform Documentation (UG1416). The platform and build target options used during linking must match those used during compilation.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.xo</span></code> object files are specified on the <code class="docutils literal notranslate"><span class="pre">v++</span></code> command by directly listing the object files. Multiple object files can be added.</p>
<p><code class="docutils literal notranslate"><span class="pre">v++</span> <span class="pre">…</span> <span class="pre">&lt;kernel_1.xo&gt;</span> <span class="pre">…</span> <span class="pre">&lt;kernel_2.xo&gt;</span></code></p>
<p>There are many options that can be specified during linking stage. For instance, <code class="docutils literal notranslate"><span class="pre">--nk</span></code> is one of them. It is used to specify the number of kernel instances, or compute units (CUs) to create during the linking process. The usage is shown below.</p>
<p><code class="docutils literal notranslate"><span class="pre">v++</span> <span class="pre">...</span> <span class="pre">--nk</span> <span class="pre">&lt;kernel_name&gt;:&lt;compute_units&gt;:&lt;kernel_name1&gt;:…:&lt;kernel_nameN&gt;</span></code></p>
<blockquote>
<div><p><strong>TIP:</strong> The instance name (`kernel_name1…’) is optional, and automatically defined if not specified.</p>
</div></blockquote>
<p>You can also specify the name of the generated output file using the <code class="docutils literal notranslate"><span class="pre">-o</span></code> option. The output file in the link stage will be a <code class="docutils literal notranslate"><span class="pre">xclbin</span></code> file, and should be named accordingly.</p>
<p><code class="docutils literal notranslate"><span class="pre">v++</span> <span class="pre">...</span> <span class="pre">-o</span> <span class="pre">&lt;xclbin_name&gt;.xclbin</span></code></p>
<p>Now, link the hardware. Notice that you must specify the platform and target as previously to match the target in the hardware compile step. Run the following command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>v++ -t sw_emu --config design.cfg -l -g -o mmult.sw_emu.xilinx_u200_xdma_201830_2.xclbin mmult.sw_emu.xilinx_u200_xdma_201830_2.xo
</pre></div>
</div>
<blockquote>
<div><p><strong>Command Options and Descriptions</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-l</span></code>: Link the kernel</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-g</span></code>: Generate debug info</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-t</span> <span class="pre">sw_emu</span></code>: Target software emulation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--config</span> <span class="pre">design.cfg</span></code>: Specify configuration files being used in compilation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nk=mmult:1:mmult_1</span></code>: Create one CU called mmult_1. This is now defined in the configuration file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mmult.sw_emu.xilinx_u200_xdma_201830_2.xo</span></code>: Input object file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-o</span> <span class="pre">mmult.sw_emu.xilinx_u200_xdma_201830_2.xclbin</span></code>: Specify the name of the output xclbin file</p></li>
</ul>
</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">v++</span></code> commands also generate the <code class="docutils literal notranslate"><span class="pre">link_summary</span></code> file that can be used with the Vitis analyzer to visualize relevant reports. Use the following command to view the link_summary.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vitis_analyzer</span> <span class="n">mmult</span><span class="o">.</span><span class="n">sw_emu</span><span class="o">.</span><span class="n">xilinx_u200_xdma_201830_2</span><span class="o">.</span><span class="n">xclbin</span><span class="o">.</span><span class="n">link_summary</span>
</pre></div>
</div>
</div>
<div class="section" id="building-for-hardware-emulation">
<h3>Building for Hardware Emulation<a class="headerlink" href="#building-for-hardware-emulation" title="Permalink to this headline">¶</a></h3>
<p>To build the hardware for <em>hardware emulation</em>, or for targeting the Alveo Data Center accelerator card <em>hardware</em>, change the <code class="docutils literal notranslate"><span class="pre">-t</span></code> option specifying the &lt;<em>build_target</em>&gt; from <strong>sw_emu</strong> to <strong>hw_emu</strong> for hardware emulation, or <strong>hw</strong> to build for the accelerator card.</p>
<p>The following code example shows the compile and link <code class="docutils literal notranslate"><span class="pre">v++</span></code> commands for the <em>hardware emulation</em> build target.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">v</span><span class="o">++</span> <span class="o">-</span><span class="n">t</span> <span class="n">hw_emu</span> <span class="o">--</span><span class="n">config</span> <span class="n">design</span><span class="o">.</span><span class="n">cfg</span> <span class="o">-</span><span class="n">c</span> <span class="o">-</span><span class="n">k</span> <span class="n">mmult</span> <span class="o">-</span><span class="n">I</span><span class="s1">&#39;../src&#39;</span> <span class="o">-</span><span class="n">o</span> <span class="n">mmult</span><span class="o">.</span><span class="n">hw_emu</span><span class="o">.</span><span class="n">xilinx_u200_xdma_201830_2</span><span class="o">.</span><span class="n">xo</span> <span class="o">../</span><span class="n">src</span><span class="o">/</span><span class="n">mmult</span><span class="o">.</span><span class="n">cpp</span>
<span class="n">v</span><span class="o">++</span> <span class="o">-</span><span class="n">t</span> <span class="n">hw_emu</span> <span class="o">--</span><span class="n">config</span> <span class="n">design</span><span class="o">.</span><span class="n">cfg</span> <span class="o">-</span><span class="n">l</span> <span class="o">-</span><span class="n">o</span> <span class="n">mmult</span><span class="o">.</span><span class="n">hw_emu</span><span class="o">.</span><span class="n">xilinx_u200_xdma_201830_2</span><span class="o">.</span><span class="n">xclbin</span> <span class="n">mmult</span><span class="o">.</span><span class="n">hw_emu</span><span class="o">.</span><span class="n">xilinx_u200_xdma_201830_2</span><span class="o">.</span><span class="n">xo</span>
</pre></div>
</div>
</div>
<div class="section" id="reviewing-hardware-emulation-build-reports-in-the-vitis-analyzer">
<h3>Reviewing Hardware Emulation Build Reports in the Vitis Analyzer<a class="headerlink" href="#reviewing-hardware-emulation-build-reports-in-the-vitis-analyzer" title="Permalink to this headline">¶</a></h3>
<p>During the compile, link, and run stages, the Vitis tool generates a summary for each step of the build process, and a series of reports related to that build step. This summary offers a brief overview of the status of the build, and the command-line used to create it. These summary reports can be viewed inside the Vitis analyzer tool, and when these summary reports are opened, the Vitis analyzer automatically opens the relevant reports associated with that summary. Some of these reports include:</p>
<ul class="simple">
<li><p>The guidance generated by the Vitis tool can have several severity levels: errors, advisories, warnings, and critical warnings. These are produced during the compilation, link, and run steps of software emulation, hardware emulation, and hardware builds.</p></li>
<li><p>For <em>hardware emulation</em> and <em>hardware</em> builds, performance estimates are provided for the kernel (<code class="docutils literal notranslate"><span class="pre">.xo</span></code>), and system (<code class="docutils literal notranslate"><span class="pre">xclbin</span></code>). The estimate reports are automatically generated for both the compilation and linking stages. It provides the estimated FPGA resource usage and estimated frequency of the hardware accelerated kernels.</p></li>
<li><p>The HLS Synthesis report provides synthesis results from the Vitis HLS tool, with sub-functions and loops described. Latency is reported in terms of clock cycles and time.</p></li>
</ul>
<p>For more information on the various reports, refer to <a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=2020.1%3Bt=vitis+doc%3Bd=profilingapplication.html%3Ba=xmv1511400547463">Profiling the Application</a> in the Application Acceleration Development flow of the Vitis Unified Software Platform Documentation (UG1416).</p>
<p>Use the following command to open the hardware emulation (hw_emu) link summary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vitis_analyzer</span> <span class="n">hw_emu</span><span class="o">/</span><span class="n">mmult</span><span class="o">.</span><span class="n">hw_emu</span><span class="o">.</span><span class="n">xilinx_u200_xdma_201830_2</span><span class="o">.</span><span class="n">xclbin</span><span class="o">.</span><span class="n">link_summary</span>
</pre></div>
</div>
<p>The following figure shows an example of the Summary report generated during the hw_emu link stage. On the left side of the Vitis analyzer tool, under the <code class="docutils literal notranslate"><span class="pre">link_summary</span></code>, you can see the list of opened reports. This includes the <code class="docutils literal notranslate"><span class="pre">compile_summary</span></code>, which is opened for each kernel included in the link command. You can select any report listed to open it in Vitis analyzer. For more information, refer to <a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=2020.1%3Bt=vitis+doc%3Bd=jfn1567005096685.html">Using the Vitis Analyzer</a> in the Application Acceleration Development flow of the Vitis Unified Software Platform Documentation (UG1416).</p>
<p><img alt="vitis_analyzer_link_summary.png" src="../_images/vitis_analyzer_link_summary.png" /></p>
<p>The Vitis analyzer uses files generated during the build process to provide its report views. Therefore, you need to add the <code class="docutils literal notranslate"><span class="pre">--save-temps</span></code> option to the command line, or config file as you have done in this tutorial. However, the saved reports will be overwritten when rerunning the build process, or building a new target. Therefore, the software emulation build reports get overwritten with hardware emulation build reports. You can prevent this by redirecting your output to a new <code class="docutils literal notranslate"><span class="pre">--temp_dir</span></code> from the command line, or you can use the <code class="docutils literal notranslate"><span class="pre">archive_summary</span></code> command to create a report archive of the current build before running a new build.</p>
<p>After running the software emulation build or the hardware emulation build, use the following command to create an archive.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">archive_summary</span> <span class="n">mmult</span><span class="o">.</span><span class="n">hw_emu</span><span class="o">.</span><span class="n">xilinx_u200_xdma_201830_2</span><span class="o">.</span><span class="n">xclbin</span><span class="o">.</span><span class="n">link_summary</span> <span class="n">mmult</span><span class="o">.</span><span class="n">hw_emu</span><span class="o">.</span><span class="n">link_summary</span><span class="o">.</span><span class="n">archive</span>
</pre></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">archive_summary</span> <span class="pre">-h</span></code> to learn more about this command, and its options. Create the archive before running subsequent builds to ensure your summary reports are preserved to compare with future runs. Archiving the link_summary automatically preserves the compile_summary report that the link_summary references.</p>
</div>
<div class="section" id="building-for-hardware">
<h3>Building for Hardware<a class="headerlink" href="#building-for-hardware" title="Permalink to this headline">¶</a></h3>
<p>The compile and link <code class="docutils literal notranslate"><span class="pre">v++</span></code> commands for the <em>hardware</em> build target are provided in the following code example.</p>
<blockquote>
<div><p><strong>IMPORTANT:</strong> Because of the FPGA binary file synthesis and implementation, compiling and linking for the hardware target can take several hours.</p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">v</span><span class="o">++</span> <span class="o">-</span><span class="n">t</span> <span class="n">hw</span> <span class="o">--</span><span class="n">config</span> <span class="n">design</span><span class="o">.</span><span class="n">cfg</span> <span class="o">-</span><span class="n">c</span> <span class="o">-</span><span class="n">k</span> <span class="n">mmult</span> <span class="o">-</span><span class="n">I</span><span class="s1">&#39;../src&#39;</span> <span class="o">-</span><span class="n">o</span> <span class="n">mmult</span><span class="o">.</span><span class="n">hw</span><span class="o">.</span><span class="n">xilinx_u200_xdma_201830_2</span><span class="o">.</span><span class="n">xo</span> <span class="o">../</span><span class="n">src</span><span class="o">/</span><span class="n">mmult</span><span class="o">.</span><span class="n">cpp</span>
<span class="n">v</span><span class="o">++</span> <span class="o">-</span><span class="n">t</span> <span class="n">hw</span> <span class="o">--</span><span class="n">config</span> <span class="n">design</span><span class="o">.</span><span class="n">cfg</span> <span class="o">-</span><span class="n">l</span> <span class="o">-</span><span class="n">o</span> <span class="n">mmult</span><span class="o">.</span><span class="n">hw</span><span class="o">.</span><span class="n">xilinx_u200_xdma_201830_2</span><span class="o">.</span><span class="n">xclbin</span> <span class="n">mmult</span><span class="o">.</span><span class="n">hw</span><span class="o">.</span><span class="n">xilinx_u200_xdma_201830_2</span><span class="o">.</span><span class="n">xo</span>
</pre></div>
</div>
</div>
<div class="section" id="putting-it-all-together">
<h3>Putting it All Together<a class="headerlink" href="#putting-it-all-together" title="Permalink to this headline">¶</a></h3>
<p>The following steps summarize how to build both the software and hardware targeting different builds using the source files in this lab.</p>
<ol>
<li><p>Set up the Vitis core development kit.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#setup Xilinx Vitis tools, XILINX_VITIS and XILINX_VIVADO will be set in this step. source &lt;VITIS install path&gt;/settings64.sh. for example:</span>
<span class="nb">source</span> &lt;Vitis_install_dir&gt;/Vitis/2020.1/settings64.sh
<span class="c1">#Setup runtime. XILINX_XRT will be set in this step</span>
<span class="nb">source</span> /opt/xilinx/xrt/setup.sh
<span class="c1">#change to the working directory</span>
<span class="nb">cd</span> ./reference-files/run
</pre></div>
</div>
</li>
<li><p>Build the host software.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>g++ -I<span class="nv">$XILINX_XRT</span>/include/ -I<span class="nv">$XILINX_VIVADO</span>/include/ -Wall -O0 -g -std<span class="o">=</span>c++11 ../src/host.cpp  -o <span class="s1">&#39;host&#39;</span>  -L<span class="nv">$XILINX_XRT</span>/lib/ -lOpenCL -lpthread -lrt -lstdc++
</pre></div>
</div>
</li>
<li><p>Build the hardware. Select the target (software emulation, hardware emulation, or hardware), and run the associated commands.</p>
<ul>
<li><p>Target for <em>software emulation</em></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>v++ -t sw_emu --config design.cfg -c -k mmult -I<span class="s1">&#39;../src&#39;</span> --temp_dir sw_emu -o <span class="s1">&#39;sw_emu/mmult.sw_emu.xilinx_u200_xdma_201830_2.xo&#39;</span> <span class="s1">&#39;../src/mmult.cpp&#39;</span>
v++ -t sw_emu --config design.cfg -l --temp_dir sw_emu -o <span class="s1">&#39;sw_emu/mmult.sw_emu.xilinx_u200_xdma_201830_2.xclbin&#39;</span> sw_emu/mmult.sw_emu.xilinx_u200_xdma_201830_2.xo
</pre></div>
</div>
</li>
<li><p>Target for <em>hardware emulation</em></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>v++ -t hw_emu --config design.cfg -c -k mmult -I<span class="s1">&#39;../src&#39;</span> --temp_dir hw_emu -o <span class="s1">&#39;hw_emu/mmult.hw_emu.xilinx_u200_xdma_201830_2.xo&#39;</span> <span class="s1">&#39;../src/mmult.cpp&#39;</span>
v++ -t hw_emu --config design.cfg -l --temp_dir hw_emu -o <span class="s1">&#39;hw_emu/mmult.hw_emu.xilinx_u200_xdma_201830_2.xclbin&#39;</span> hw_emu/mmult.hw_emu.xilinx_u200_xdma_201830_2.xo
</pre></div>
</div>
</li>
<li><p>Target for <em>system</em></p>
<blockquote>
<div><p><strong>IMPORTANT:</strong> This step is optional as it can take several hours.</p>
</div></blockquote>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>v++ -t hw --config design.cfg -c -k mmult -I<span class="s1">&#39;../src&#39;</span> --temp_dir hw -o <span class="s1">&#39;hw/mmult.hw.xilinx_u200_xdma_201830_2.xo&#39;</span> <span class="s1">&#39;../src/mmult.cpp&#39;</span>
v++ -t hw --config design.cfg -l --temp_dir hw -o <span class="s1">&#39;hw/mmult.hw.xilinx_u200_xdma_201830_2.xclbin&#39;</span>   hw/mmult.hw.xilinx_u200_xdma_201830_2.xo
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Archive the link_summary and compile_summary for the build.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">archive_summary</span> <span class="n">mmult</span><span class="o">.</span><span class="n">hw_emu</span><span class="o">.</span><span class="n">xilinx_u200_xdma_201830_2</span><span class="o">.</span><span class="n">xclbin</span><span class="o">.</span><span class="n">link_summary</span> <span class="n">mmult</span><span class="o">.</span><span class="n">hw_emu</span><span class="o">.</span><span class="n">link_summary</span><span class="o">.</span><span class="n">archive</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">¶</a></h2>
<p>After successfully building a design, you will want to run emulation to debug and optimize the design.</p>
<ul class="simple">
<li><p>The <a class="reference internal" href="Emulation.html"><span class="doc">Running Software and Hardware Emulation</span></a> lab details how to run software and hardware emulation.</p></li>
<li><p>If you have an Alveo Data Center accelerator card, you can also run the application directly on hardware by following the details in the <a class="reference internal" href="HardwareExec.html"><span class="doc">Executing in Hardware</span></a> lab.</p></li>
</ul>
</br>
<hr/>
<p align="center" class="sphinxhide"><b><a href="/docs/vitis-getting-started/">Return to Getting Started Pathway</a> — <a href="./README.md">Return to Start of Tutorial</a></b></p><p align="center" class="sphinxhide"><sup>Copyright&copy; 2020 Xilinx</sup></p></div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>
	  
	  
	  <!-- Sphinx Page Footer block -->
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on July 23, 2020.
      </span>

    </p>
  </div>	  
      </div>
    </section>


  




  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>     	    
	    
	    
  
  
    
  
  

  
  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2020, Xilinx
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}
			
			underscoreSetup();
		</script>
	</body>
</html>